# you must get the following information from the Twitter App you just created
my.consumer.key = "G1K4SmBczbcd4rNqwoZNRhPKl"
my.consumer.secret = "CDEdrjgbOs1bCey6v1PuQiTZIRKnN8Aitcg1m0pCTLUtnwnhzM"
my.access.token = "2184148823-UuBxJfRswkZ0HiDIpEIAdKFLYvW4ZKLluaSDW0P"
my.access.token.secret = "jVVikuQlLRHqVd4UD5VzEC2E8ykitp0ermwlBJlMIKI4G"
my_oauth <- setup_twitter_oauth(consumer_key = my.consumer.key, consumer_secret = my.consumer.secret, access_token = my.access.token, access_secret = my.access.token.secret)

twitter_tokens <- create_token(app = "my_app",consumer_key = "G1K4SmBczbcd4rNqwoZNRhPKl",consumer_secret = "CDEdrjgbOs1bCey6v1PuQiTZIRKnN8Aitcg1m0pCTLUtnwnhz")

search.string <- "#CricketComesToKarachi"
result.item <- searchTwitter(search.string, n=100)
head(result.item)
df_cricket <- twListToDF(result.item)
write.csv(df_cricket, "cricket_khi.csv")
View(df_cricket)


tweets <- searchTwitter(searchString = "Brexit", n=100, lang="en", since="2018-03-01", until="2019-03-03" , resultType = "popular")
#Tweets to Dataframe
tweetsDF <- twListToDF(tweets)
View('tweetsDF')
names(tweetsDF)
retweetsByAuthor <- aggregate(formula = retweetCount ~ screenName, data = tweetsDF, FUN = sum)
ggplot(head(retweetsByAuthor, 20), aes(reorder(screenName, -retweetCount), retweetCount)) + geom_bar(stat = "identity") + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))

#Tweet Counts 
IK <- getUser("@ImranKhanPTI")
statusesCount(IK)

#Count
trump <- userTimeline("realDonaldTrump", n=3200, includeRts=T)
obama <- userTimeline("BarackObama", n=3200, includeRts=T)
potus <- userTimeline("POTUS44", n=3200, includeRts=T)
df.trump <- twListToDF(trump)
df.obama <- twListToDF(obama)
df.potus <- twListToDF(potus)
replace_reg <- "http[s]?://[A-Za-z\\d/\\.]+|&amp;|&lt;|&gt;"


lat = 33.738045
lon = 73.084488

woid pak : 2211177

availableTrendLocations() 

> closestTrendLocations(33.738045, 73.084488)
name  country   woeid
1 Rawalpindi Pakistan 2211387
Karachi 211096

#Pakistan getTrends 
khi <- getTrends(2211096)

#Authorize GA
install.packages("googleAnalyticsR")
library(googleAnalyticsR)
ga_auth()
MyView <- google_analytics_account_list()
View(MyView)

Gid <- 135891171
userTimeline(user = "realDonaldTrump", n = 5)
install.packages("wordcloud")
install.packages("tm")
tweets <- searchTwitter("#Cricket", n=1000, lang="en")
tweets.text <- sapply(tweets, function(x) x$getText())
tweets.text <- gsub("rt", "", tweets.text)
# Replace @UserName
tweets.text <- gsub("@\\w+", "", tweets.text)
# Remove punctuation
tweets.text <- gsub("[[:punct:]]", "", tweets.text)
# Remove links
tweets.text <- gsub("http\\w+", "", tweets.text)
# Remove tabs
tweets.text <- gsub("[ |\t]{2,}", "", tweets.text)
# Remove blank spaces at the beginning
tweets.text <- gsub("^ ", "", tweets.text)
# Remove blank spaces at the end
tweets.text <- gsub(" $", "", tweets.text)

# #convert all text to lower case
tweets.text <- tolower(tweets.text)

library(tm)
#create corpus
#clean up by removing stop words
tweets.text.corpus <- tm_map(tweets.text.corpus, function(x) removeWords(x,stopwords()))
